---
layout: post
title:  "Blog 2: Windows Firewall through Command Line"
date:   2020-09-18 01:51:40 -0700
categories: Blog Class
---

The terminal never gets old and as a system administrator you have to always use it for everything. Windows does not require much use for the command line but sometimes you do not get as lucky and your boss tells you that you have to manage a Windows Core Server.
This guide goes through several commands you can use to turn your firewall on or off, add or remove rules from your list, and even show your current profile.

The tool that we are going to use to be able to control the firewall of Windows systems is `netsh`. Netsh stands for "network shell" and it is a command line utility that is used in Windows systems to configure systems in a local or remote manner. Besides managing your firewall, it can also update your system, reset the TCP/IP stack, and even change your IP address. It is a really powerfull tool, but for this blog we are going to focus on the flags used for the Windows firewall. The basic commands to manage the firewall are:

     
   1. `netsh advfirewall reset` - The command will restore the Windows Firewall to the default policy. This will basically allow all outbound and block all inbound. 


   2. `netsh advfirewall firewall add rule name="Open Port 80" dir=in action=allow protocol=TCP localport=80` - This command will add a rule named "Open Port 80" to allow port 80 inbound, meaning port 80 can connect to your computer.


   3. `netsh advfirewall firewall delete rule name= "Open Port 80" protocol=tcp localport=80` - This will delete the rule that is named "Open Port 80" and it will delete from your current profile.

      
   4. `netsh advfirewall firewall add rule name="ICMP Allow incoming V4 echo request" protocol=icmpv4:8,any dir=in action=allow` - This rule allows ICMP packets so that when someone pings your machine, it responds. Normally, you would want to deny this if it is a critical server.   

        This specific command will allow ping requests to a computer 

        To update a rule that already exists, do: 

        netsh advfirewall firewall set rule name="Open Port 80" new profile=any localport=443 protocol=udp 

        You can change any options you want like localport or protocol. The “new” option is key to set the new values. 

        To find out which profile is advfirewall in, do: 

        netsh advfirewall show currentprofile 

        To get information about advfirewall all profiles 

        netsh advfirewall show allprofiles state 

        To see the rules that you have in the firewall, do: 

        netsh advfirewall firewall show rule name=all 

        Netsh advifirewall firewall show rule name=all | find “Http” 

        Netsh advfirewall firewall show rule name=”Http” 

        netsh advfirewall firewall show rule name=all dir=in 

        These are some come rules to use:l 

